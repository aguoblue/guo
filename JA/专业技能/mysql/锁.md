
## 全局锁
对整个数据库实例加锁，加锁后整个实例处于只读状态
数据备份
主从问题
innoDB备份时加参数 --single-transaction 不加锁完成一致性数据备份


## 表级锁

表锁
	表共享读锁
	表独占写锁
元数据锁MDL
	元数据锁是MySQL用来管理对数据库对象（如表、视图等）元数据的访问的一种锁机制。其主要目的是保证数据定义语言（DDL）操作的安全性，比如当一个会话正在修改表结构（如执行`ALTER TABLE`）时，通过元数据锁来阻止其他会话对同一表进行读写操作，从而避免操作冲突和保证操作的原子性。元数据锁是在访问表时自动获取的，并且在事务结束时自动释放。
![[Pasted image 20240330155050.png]]
意向锁
	解决表锁和行锁的冲突
- 意向锁是一种表级锁，表示事务打算在表中的一些行上加锁（不管是共享锁还是排他锁）。意向锁有两种类型：意向共享锁（Intention Shared Lock, IS）和意向排他锁（Intention Exclusive Lock, IX）。
- 意向锁是为了在行级锁（如由`LOCK IN SHARE MODE`或`FOR UPDATE`引起的锁）和表级锁之间提供一种兼容性检查机制。通过首先获取意向锁，数据库能够有效地检测潜在的锁冲突，减少锁检查的复杂性。
![[Pasted image 20240330173909.png]]
	意向共享锁IS
	意向排它锁IX
![[Pasted image 20240330174020.png]]
意向锁是一种**机制**，让数据库系统知道某个事务对特定表的行加锁的意图。这并不是直接对行加锁，而是在行级锁操作之前的一种声明。

## 行级锁
粒度最小，应用在InnoDB
![[Pasted image 20240330174105.png]]
### 行锁 
RC、RR隔离级别下都支持
	共享锁
	排他锁
![[Pasted image 20240330165844.png]]
![[Pasted image 20240330175539.png]]
### 间隙锁
### 临键锁
![[Pasted image 20240330192043.png]]