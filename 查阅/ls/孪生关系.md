
知识图谱

分层

自动生成关系


分层
> 为某一类生产场景设计  --生产线场景
> ３Ｄ模型组态构建、设备运动组态构建、生产事件组态构建、产线逻辑组态构建








生产线模型组态是真实模型的虚拟展示，其展示 效果的好坏直接影响用户的体验感和真实感，也是后 续关于产线布局和逻辑控制部分的研究的基础理论。
产线孪生系统的３Ｄ模型组态建模采用视图引擎 ＯｐｅｎＳｃｅｎｅＧｒａｐｈ（简称ＯＳＧ）［９］可视化，通过开源几 何造型引擎ＯｐｅｎＣＡＳＣＡＤＥ（简称ＯＣＣ）［１０］读取模型 的几何拓扑信息，传入ＯＳＧ中进行了重绘显示。分析 工业领域的模型文件格式，如ＩＧＥＳ、ＳＴＥＰ等，基于 ＯＣＣ的功能实现模型拓扑等信息的读取，并向ＯＳＧ中 的顶点数组进行转换，实现模型的快速显示与交互。
ＯＣＣ中的建模数据模块主要用于提供几何模型 的数据结构。首先对一个实体最基本的几何元素和几 何信息进行描述，对于常用模型可以采用Ｂｒｅｐ法［１１］ 进行构建。拓扑信息指的是几何元素间的连接关系，ＯＣＣ几何引擎描述了最基本的几何元素，但对于一些 特殊类型没有描述。基于此通过引用低层次的拓扑类 型可以自定义诸如壳、圈等拓扑体如图３所示。在完 成图形几何拓扑信息的读取后，将生产线模型有组织 地加入到数据库中，形成自定义数据模型库，ＯＳＧ是在ＯｐｅｎＧＬ上进一步封装得到的场景图形 开发包。通过构造产线孪生模型场景树实现３Ｄ模型 组态的可视化与图形渲染。首先进行场景树的实时图 形修改；然后针对修改后的场景树，挑选其所有节点的 包围盒；最终完成３Ｄ模型组态的可视化和几何渲染


生产线主要设备模型主要有两类：制造资源类、工 件类。其中前者对应于生产线中的各种机床设备；后 者主要是待加工零件或已加工完零件。其中还包括加 工设备（车、钻、磨、铣床）、输送设备（小车、传送带）、 仓储类设备（工件源、缓冲站）等。根据产线运动组态 关键要素的特征进行划分，每种设备都能提前设置运 动状态，然后对路径进行规划。
如图４所示为划分后的各类型组件库，提供了机 器人、机床、ＡＧＶ、传送带等几个典型设备的运动组态 构建方法。可通过机器人离线编程方式实现机器人运 动组态的构建。还可通过加工装备通用组件的基础功 能：多可动模型，多路径搭建等，搭建出机床、ＡＧＶ等 组件，并支持上下料、加工等基本功能动作。对于传送 带运动组态，通过传送带组件可以对传送带的模型、颜 色、运动路径、方向、速度等进行构建修改，从而构建出各种各样的传送带



对产线关键要素的事件组态信息进行分析，划定 机器人的事件组态由上料事件、下料事件、关节移动事 件以及位置移动事件构成；传送带可用于工件的运输， 其事件组态由上料事件、下料事件、启动事件以及停止 事件构成；机床的事件组态由开门事件、关门事件以及 加工事件构成。产生装置用于仿真时生成待加工工件，其事件组 态主要由产生事件构成。针对待加工工件的多样性， 产生事件应支持待加工工件模型的自定义设置，包括 模型的外观特征以及材质颜色等。此外，考虑到工件 运动流转过程的合理性，其产生位置的相关信息亦可 在产生事件中进行相关配置。针对具体应用场景，可区 分为工件加工已完成和运输至其他组件两种情况，对于 前者，工件已经历生产线中加工及运输的整个周期，反映在产线孪生系统虚拟仿真中则体现为工件下料后消失；而对于后者，工件将经历下一工序的运输与加工，等 待其他组件进行相关的处理，反映在虚拟仿真中则体现 为工件下料后停止在原地并等待其他组件的运输加工。


根据组件库中的类型划分，将产线中的逻辑事件 进行不同的封装处理，以导航树的形式描述层次关系。 运动组态构成了逻辑组态的运行基础，根据组件中已 构建的运动组态，结合生产过程中的具体工艺及相关 控制信号，形成了基于动作节点的逻辑控制方案，据此 提出了产线孪生系统关键装备的逻辑组态构建方法。
产线的工艺流程由工序组成，工序又可进一步细 分为工步，工步作为一道工序若干步骤中的一步，是保 持仿真参数不变时的连续加工作业过程。在产线孪生 仿真系统中，引入动作节点的概念对工序进行描述，工 步的描述保持不变，其层级结构如图５所示。




在产线孪生系统中每道工序都由特定的加工装备
完成，其中将执行工序动作的模型称为运动单元，如机 器人、机床、传送带等。以机器人为例，首先通过离线 编程软件规划其运动路径并构建工步，然后结合机器 人模型的信号量，形成对应的动作节点。所有运动单 元的动作节点，共同构成了产线的逻辑组态。
在实际产线中，总控系统下发调度指令，执行机构 进行解析工作并据此更新控制信号，进而驱动执行目 标动作。在组件中，采用信号量形式模拟实际的控制 信号，通过给定信号量状态变化的条件，使信号量与动 作节点关联，结合动作节点运动前后的信号反馈，完成
产线的逻辑组态构建



产线关键要素之间存在相互联系、相互制约、相互 依存的关系。根据前述研究，基于组态化的思想可以 将其分为３Ｄ模型组态、运动组态、事件组态和逻辑组 态。在产线的搭建过程中，各层次组态之间具有特定的配合及联系，本章主要的任务就是完成这种关系的 快速建模，主要包括孪生产线关键要素的布局关系、信号关联关系和事件逻辑关系